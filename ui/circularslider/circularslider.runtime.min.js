TW.Runtime.Widgets.circularslider=function(){var a=this,l=(new Date).getTime()+"_"+Math.floor(1E3*Math.random()),n=2*Math.PI,A=Math.PI/2,F=Math.PI/180,B=!1,e=-1,q=-1;this.runtimeProperties=function(){return{needsDataLoadingAndError:!1}};this.renderHtml=function(){return'<div class="widget-content widget-circularslider widget-circularslider-'+l+'">  <canvas class="widget-circularslider-canvas widget-circularslider-canvas-'+l+'"></canvas></div>'};this.afterRender=function(){var r=a=>0>a?a+n:a>n?a-n:
a,v=a.getProperty("debugMode"),c=a.getProperty("numberOfKnobs"),t=a.getProperty("startAngle")*F,k=a.getProperty("sliderStrokeWidth"),f=a.getProperty("knobsRadius"),w=a.getProperty("animation"),d=$(".widget-circularslider-"+l)[0];(new ResizeObserver(a.draw)).observe(d);var m=$(".widget-circularslider-canvas-"+l)[0];m.onmousemove=function(h){var g=a.getProperty("min"),p=a.getProperty("max")-g+1,d=n/(2*p),l=m.width/2,C=m.height/2;if(B)q=r(Math.atan2(h.offsetY-C,h.offsetX-l)+A),q=r(q-t),q=r(q+d),h=a.getProperty("Value"+
e),g=Math.floor(p*q/n+g),h!==g?1<c?(p=a.getProperty("Value"+(1<e?e-1:c)),h=a.getProperty("Value"+(e<c?e+1:1)),v&&console.log("CircularSlider - editing - prevValue = "+p+", newValue = "+g+", nextValue = "+h),g!==p&&g!==h?(a.setProperty("Value"+e,g),a.jqElement.triggerHandler("ValuesChanged"),a.draw()):"SMOOTH"===w&&a.draw()):(a.setProperty("Value"+e,g),a.jqElement.triggerHandler("ValuesChanged"),a.draw()):"SMOOTH"===w&&a.draw();else{d=-1;for(var D=Math.min(m.width,m.height)/2-k,u=1;u<=c;u++){var x=
a.getProperty("Value"+u),b=n*(x-g)/p-A+t;x=l+D*Math.cos(b)-h.offsetX;b=C+D*Math.sin(b)-h.offsetY;Math.sqrt(x*x+b*b)<f&&(d=u)}d!==e&&(e=d,a.draw())}};m.onmousedown=function(a){-1!==e&&(B=!0)};m.onmouseup=function(c){B=!1;"SMOOTH"===w&&a.draw()}};this.serviceInvoked=function(a){};this.draw=function(){var r=a.getProperty("numberOfKnobs"),v=a.getProperty("min"),c=a.getProperty("max"),t=a.getProperty("startAngle")*F,k=a.getProperty("sliderStrokeWidth"),f=a.getProperty("sliderBackgroundColor"),w=a.getProperty("knobsRadius"),
d=a.getProperty("knobsFontSize"),m=a.getProperty("knobsBackgroundColor"),h=a.getProperty("knobsFontColor"),g=a.getProperty("knobsBorderWidth"),p=a.getProperty("knobsBorderColor"),G=a.getProperty("knobSelectedBorderColor"),H=a.getProperty("knobsFormatFunction"),C=a.getProperty("showValuesSummary"),D=a.getProperty("animation"),u=c-v+1,x=n/(2*u);c=$(".widget-circularslider-"+l)[0];var b=$(".widget-circularslider-canvas-"+l)[0];if(c&&b){b.width=c.offsetWidth-1;b.height=c.offsetHeight-1;var E=Math.min(b.width,
b.height)/2-k;c=b.width/2;var z=b.height/2;b=b.getContext("2d");b.font=d+"px sans-serif";b.lineWidth=k;b.strokeStyle=f;b.beginPath();b.arc(c,z,E,0,2*Math.PI);b.stroke();k=[];for(f=1;f<=r;f++){k[f]=a.getProperty("Value"+f);eval("try {var result;var value = "+k[f]+";"+H+"} catch (exception) {console.log(exception);}");var y=B&&"SMOOTH"===D&&e===f?q-A+t-x:n*(k[f]-v)/u-A+t;d=E*Math.cos(y);y=E*Math.sin(y);b.fillStyle=m;b.beginPath();b.arc(c+d,z+y,w,0,2*Math.PI);b.fill();b.lineWidth=g;b.strokeStyle=e===
f?G:p;b.beginPath();b.arc(c+d,z+y,w,0,2*Math.PI);b.stroke();b.textBaseline="middle";b.lineWidth=1;b.fillStyle=h;b.fillText(result,c+d-b.measureText(result).width/2,z+y)}C&&(r=a.getProperty("valuesSummaryFormatFunction"),v=a.getProperty("valuesSummaryFontSize"),t=a.getProperty("valuesSummaryFontColor"),k=k.slice(1),k.sort((a,b)=>a-b),eval("try {var result;"+r+"} catch (exception) {console.log(exception);}"),b.font=v+"px sans-serif",b.textBaseline="middle",b.lineWidth=1,b.fillStyle=t,b.fillText(result,
c-b.measureText(result).width/2,z))}}};