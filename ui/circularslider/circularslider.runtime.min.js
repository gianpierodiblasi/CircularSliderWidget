TW.Runtime.Widgets.circularslider=function(){var a=this,E=(new Date).getTime()+"_"+Math.floor(1E3*Math.random()),t=2*Math.PI,F=Math.PI/2,N=Math.PI/180,H=!1,p=-1,z=-1;this.runtimeProperties=function(){return{needsDataLoadingAndError:!1}};this.renderHtml=function(){return'<div class="widget-content widget-circularslider widget-circularslider-'+E+'">  <canvas class="widget-circularslider-canvas widget-circularslider-canvas-'+E+'"></canvas></div>'};this.afterRender=function(){var A=a=>0>a?a+t:a>t?a-t:
a,u=a.getProperty("debugMode"),k=a.getProperty("numberOfKnobs"),x=a.getProperty("startAngle")*N,q=a.getProperty("sliderStrokeWidth"),e=a.getProperty("knobsRadius"),y=a.getProperty("animation"),B=a.getProperty("showTicks"),K=a.getProperty("showTicksTooltip"),I=a.getProperty("primaryTicksStep"),C=a.getProperty("primaryTicksRadius"),J=a.getProperty("secondaryTicksRadius"),L=a.getProperty("ticksTooltipFormatFunction"),M=$(".widget-circularslider-"+E)[0];(new ResizeObserver(a.draw)).observe(M);var n=$(".widget-circularslider-canvas-"+
E)[0];n.onmousemove=function(m){var g=a.getProperty("min"),l=a.getProperty("max"),r=l-g+1,D=t/(2*r),h=n.width/2,b=n.height/2;if(H)z=A(Math.atan2(m.offsetY-b,m.offsetX-h)+F),z=A(z-x),z=A(z+D),m=a.getProperty("Value"+p),g=Math.floor(r*z/t+g),m!==g?1<k?(r=a.getProperty("Value"+(1<p?p-1:k)),m=a.getProperty("Value"+(p<k?p+1:1)),u&&console.log("CircularSlider - editing - prevValue = "+r+", newValue = "+g+", nextValue = "+m),g!==r&&g!==m?(a.setProperty("Value"+p,g),a.jqElement.triggerHandler("ValuesChanged"),
a.draw()):"SMOOTH"===y&&a.draw()):(a.setProperty("Value"+p,g),a.jqElement.triggerHandler("ValuesChanged"),a.draw()):"SMOOTH"===y&&a.draw();else{D=-1;n.title="";for(var v=Math.min(n.width,n.height)/2-q,d=1;d<=k;d++){var w=a.getProperty("Value"+d),c=t*(w-g)/r-F+x,f=v*Math.cos(c);c=v*Math.sin(c);f=h+f-m.offsetX;c=b+c-m.offsetY;Math.sqrt(f*f+c*c)<e&&(D=d)}if("NO"!==B&&K)for(w=g;w<=l;w++){c=t*(w-g)/r-F+x;f=v*Math.cos(c);c=v*Math.sin(c);f=h+f-m.offsetX;c=b+c-m.offsetY;d=!1;switch(B){case "PRIMARY":d=0===
(w-g)%I&&Math.sqrt(f*f+c*c)<C;break;case "SECONDARY":d=Math.sqrt(f*f+c*c)<J;break;case "ALL":d=(d=0===(w-g)%I)&&Math.sqrt(f*f+c*c)<C||!d&&Math.sqrt(f*f+c*c)<J}d&&(eval("try {var result;"+L+"} catch (exception) {console.log(exception);}"),n.title=result)}D!==p&&(p=D,a.draw())}};n.onmousedown=function(a){-1!==p&&(n.title="",H=!0)};n.onmouseup=function(e){n.title="";H=!1;"SMOOTH"===y&&a.draw()}};this.serviceInvoked=function(a){};this.draw=function(){var A=a.getProperty("numberOfKnobs"),u=a.getProperty("min"),
k=a.getProperty("max"),x=a.getProperty("startAngle")*N,q=a.getProperty("sliderStrokeWidth"),e=a.getProperty("sliderBackgroundColor"),y=a.getProperty("knobsRadius"),B=a.getProperty("knobsFontSize"),K=a.getProperty("knobsBackgroundColor"),I=a.getProperty("knobsFontColor"),C=a.getProperty("knobsFontFamily"),J=a.getProperty("knobsBorderWidth"),L=a.getProperty("knobsBorderColor"),M=a.getProperty("knobSelectedBorderColor"),n=a.getProperty("knobsFormatFunction"),m=a.getProperty("showValuesSummary"),g=a.getProperty("animation"),
l=a.getProperty("showTicks"),r=k-u+1,D=t/(2*r),h=$(".widget-circularslider-"+E)[0],b=$(".widget-circularslider-canvas-"+E)[0];if(h&&b){b.width=h.offsetWidth-1;b.height=h.offsetHeight-1;var v=Math.min(b.width,b.height)/2-q;h=b.width/2;var d=b.height/2;b=b.getContext("2d");b.font=B+"px "+C;b.lineWidth=q;b.strokeStyle=e;b.beginPath();b.arc(h,d,v,0,2*Math.PI);b.stroke();if("NO"!==l){B=a.getProperty("primaryTicksStep");C=a.getProperty("primaryTicksRadius");for(var w=a.getProperty("secondaryTicksRadius"),
c=a.getProperty("primaryTicksColor"),f=a.getProperty("secondaryTicksColor"),G=u;G<=k;G++)switch(e=t*(G-u)/r-F+x,q=v*Math.cos(e),e=v*Math.sin(e),l){case "PRIMARY":0===(G-u)%B&&(b.fillStyle=c,b.beginPath(),b.arc(h+q,d+e,C,0,2*Math.PI),b.fill());break;case "SECONDARY":b.fillStyle=f;b.beginPath();b.arc(h+q,d+e,w,0,2*Math.PI);b.fill();break;case "ALL":var O=0===(G-u)%B;b.fillStyle=O?c:f;b.beginPath();b.arc(h+q,d+e,O?C:w,0,2*Math.PI);b.fill()}}k=[];for(l=1;l<=A;l++)k[l]=a.getProperty("Value"+l),eval("try {var result;var value = "+
k[l]+";"+n+"} catch (exception) {console.log(exception);}"),e=H&&"SMOOTH"===g&&p===l?z-F+x-D:t*(k[l]-u)/r-F+x,q=v*Math.cos(e),e=v*Math.sin(e),b.fillStyle=K,b.beginPath(),b.arc(h+q,d+e,y,0,2*Math.PI),b.fill(),b.lineWidth=J,b.strokeStyle=p===l?M:L,b.beginPath(),b.arc(h+q,d+e,y,0,2*Math.PI),b.stroke(),b.textBaseline="middle",b.lineWidth=1,b.fillStyle=I,b.fillText(result,h+q-b.measureText(result).width/2,d+e);m&&(A=a.getProperty("valuesSummaryFormatFunction"),u=a.getProperty("valuesSummaryFontSize"),
x=a.getProperty("valuesSummaryFontColor"),y=a.getProperty("valuesSummaryFontFamily"),k=k.slice(1),k.sort((a,b)=>a-b),eval("try {var result;"+A+"} catch (exception) {console.log(exception);}"),b.font=u+"px "+y,b.textBaseline="middle",b.lineWidth=1,b.fillStyle=x,b.fillText(result,h-b.measureText(result).width/2,d))}}};